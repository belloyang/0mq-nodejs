#include "MsgOpaqueData.h"

MsgOpaqueData::MsgOpaqueData()
:  IPDBMsgObject(PDB_eMessageType_t::MSG_OPAQUE_DATA_V0)
{
  __DEV_CALLSTACK_FUNC__;
}

bool MsgOpaqueData::init(const Header& header)
{
  __DEV_CALLSTACK_FUNC__;
  //tss_pdblib::calculate size required for Header
  const size_t totalSize = sizeof(Header);
  char* pBuffer = this->_alloc_buffer(totalSize);
  if (pBuffer != nullptr)
  {
    Header* const headerPtr = reinterpret_cast<Header*>(pBuffer);
    ::memcpy(headerPtr, &header, sizeof(Header));
    return true;
  }

  return false;
}
