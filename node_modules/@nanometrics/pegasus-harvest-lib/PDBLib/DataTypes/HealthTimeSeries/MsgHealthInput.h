#ifndef MsgHealthInput_h__
#define MsgHealthInput_h__

#include "../IPDBMsgObject.h"

static const PDB_sSampleRate_t MSG_HEALTH_INPUT_SAMPLE_RATE_DEFAULT = PDB_sSampleRate_t{ {-10, 1} };

/// <summary>
/// MsgHealthInput data type.\n
/// https://docs.google.com/document/d/1MmqKtqdSDSwQqB5bv-6PxX23_eUgODdgNfh0yyGyZy4/edit#heading=h.eu5dixgb6dvv
/// </summary>
class MsgHealthInput : public IPDBMsgObject
{
public:
  //! Header structure
  #pragma pack(push, 1) // compact byte packing
  typedef struct
  {
    //! POSIX time of first sample in the packet, nanosecond resolution
    timestamp_t timestamp;
    //! sample rate (factor, multiplier)
    PDB_sSampleRate_t sample_rate;
    //! Number of samples in the message; 0-26
    uint16_t  n_samples;
    //! Sample array of health inputs. Each element corresponds to one sample of all health inputs
    PDB_HealthSample_t samples[13];
  } Header;
  #pragma pack(pop) // #pragma pack(push, 1)

  //! Header getter
  FORCE_INLINE const Header* getHeader() const { return reinterpret_cast<Header*>(m_bufferState.buffer); }

public:
  /**
   * MsgHealthInput constructor
   */
  MsgHealthInput();

  /**
   * MsgHealthInput destructor
   */
  virtual ~MsgHealthInput() = default;

  /**
   * Initializes MsgHealthInput object
   * @param header  header data
   * @return        true on success; false - otherwise
   */
  bool init(const Header& header);
};

#endif //MsgHealthInput_h__
