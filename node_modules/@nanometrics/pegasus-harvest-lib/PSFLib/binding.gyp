{
  "targets": [
    {
      "target_name": "libPSFLibrary",
      "cflags!": ["-fno-exceptions", "-Wno-unused-parameter"],
      "cflags_cc!": ["-fno-exceptions", "-Wno-unused-parameter"],
      "cflags": ["-Wall", "-Wextra", "-Wpedantic"],
      "cflags_cc": ["-Wall", "-Wextra", "-Wpedantic"],
      "type": "static_library",
      "sources": [
        "./PSFDetector/IPSFDetector.cpp",
        "./Library/PSFVolume.cpp",
        "./Library/IPSFEntity.cpp",
        "./Library/PSFDataElement.cpp",
        "./Library/cursors/PSFWriteCursor.cpp",
        "./Library/cursors/PSFReadCursor.cpp",
        "./Library/PSFSection.cpp",
        "./Library/IPSFSectionUpdateDelegate.cpp",
        "./Library/PSFSectionUpdateDelegate_Always.cpp",
        "./Library/PSFSectionUpdateDelegate_ElementsCount.cpp",
        "./Library/search/MaxSequenceEndDichotomiser.cpp",
        "./Library/search/MinSequenceEndDichotomiser.cpp",
        "./Library/search/SearchSequenceNumberDichotomiser.cpp",
        "./Library/PSFLibrary.cpp",
        "./Library/PSFStream.cpp",
        "./Utils/psf_utils.cpp"
      ],

      "msvs_settings": {
        "VCCLCompilerTool": {
          "ExceptionHandling": 1
        }
      },
      "xcode_settings": {
        "GCC_ENABLE_CPP_EXCEPTIONS" : "YES"
      },

      "conditions": [
        ['OS=="win"', {
          "sources": [
             "./PSFDetector/win32/PSFDetector_Windows.cpp"
          ],
          "defines": ['__WIN32']
        }],
        ['OS=="linux"', {
          "sources": [
             "./PSFDetector/linux/PSFDetector_Linux.cpp"
          ],
          "defines": ['__linux__'],
          "conditions": [
            ['target_arch=="silvermont"', {
                "cflags": ['-march=silvermont', '-mtune=silvermont', '-m64'],
                "ldflags": ['-m64']
              }
            ]
          ]
        }],
        ['OS=="mac"', {
          "sources": [
             "./PSFDetector/macOS/PSFDetector_MacOS.cpp"
          ],
          "defines": ['__APPLE__']
        }]         
      ],
      
      "cflags": ["-Wall", "-std=c++1y"],
      'dependencies': [
          '../LibIO/binding.gyp:libLibIO',
      ],
      "include_dirs" : [
          '../LibIO'
      ]
    }
  ] 
}
