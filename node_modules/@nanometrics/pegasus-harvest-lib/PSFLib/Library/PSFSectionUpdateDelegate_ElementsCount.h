#ifndef PSFSectionUpdateDelegate_ElementsCount_h__
#define PSFSectionUpdateDelegate_ElementsCount_h__

#include "IPSFSectionUpdateDelegate.h"

class PSFSectionUpdateDelegate_ElementsCount : public IPSFSectionUpdateDelegate
{
public:
  PSFSectionUpdateDelegate_ElementsCount(const uint32_t nElementsToFlush, const std::shared_ptr<ILogger>& logger);
  virtual ~PSFSectionUpdateDelegate_ElementsCount() = default;

  virtual bool shouldUpdate(PSFSection* pSection, const size_t dataSize) __OVERRIDES__(IPSFSectionUpdateDelegate);
  virtual void onSectionUpdated(PSFSection* pSection) __OVERRIDES__(IPSFSectionUpdateDelegate);

private:
  const uint32_t m_nElementsToFlush;
  uint32_t m_nElementsWrittenSinceFlush;
};

#endif //PSFSectionUpdateDelegate_ElementsCount_h__
