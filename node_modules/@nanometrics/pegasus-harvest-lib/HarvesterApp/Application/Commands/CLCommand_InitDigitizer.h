#ifndef CLCommand_InitDigitizer_h__
#define CLCommand_InitDigitizer_h__

#include "CLCommandBase.h"

#include <Library/PSFStream.h>

#include <DataTypes/DigitizerOperationLog/MsgDigitizerStart.h>

class CLCommand_InitDigitizer : public CLCommandBase
{
public:
  CLCommand_InitDigitizer(const std::shared_ptr<ILogger>& logger);
  virtual ~CLCommand_InitDigitizer() = default;

private:
  bool _writeDigitizerStart(PSFStream& volumeStream);
  bool _writeOpaqueData(PSFStream& volumeStream);

  virtual int _runImpl() __OVERRIDES__(ICLCommand);
  virtual std::string _getDescriptionImpl() const __OVERRIDES__(ICLCommand);
  
  bool _parseLibPath(const char* arg);
  bool _parseStartTimestamp(const char* arg);
  bool _parseOpaqueDataPath(const char* arg);
  bool _parseGZip(const char* arg);
  
private:
  std::string m_libPath;
  timestamp_t m_startTimestamp;
  std::string m_opaqueDataPath;
  bool m_gzipData;
};

#endif //CLCommand_InitDigitizer_h__
