{
  "targets": [
    {
      "target_name": "libHarvLibrary",
      "cflags!": ["-fno-exceptions", "-Wno-unused-parameter"],
      "cflags_cc!": ["-fno-exceptions", "-Wno-unused-parameter"],
      "cflags": ["-Wall", "-Wextra", "-Wpedantic"],
      "cflags_cc": ["-Wall", "-Wextra", "-Wpedantic"],
      "type": "static_library",
      "sources": [
        "./Utils/harvester_utils.cpp",

        "./Client/PlatformBasedClient.cpp",

        "./steim/steim1.cpp",
        "./steim/steim2.cpp",
        "./steim/decoders/ISteimDecoder.cpp",
        "./steim/decoders/SteimDecoder_Steim1.cpp",
        "./steim/decoders/SteimDecoder_Steim2.cpp",
        "./steim/synthesizers/IMiniSEEDRecordsSynthesizer.cpp",
        "./steim/synthesizers/MiniSEEDRecordsSynthesizer_NoCompression.cpp",
        "./steim/synthesizers/MiniSEEDRecordsSynthesizer_Steim1.cpp",
        "./steim/synthesizers/MiniSEEDRecordsSynthesizer_Steim2.cpp",
        "./steim/synthesizers/IMiniSEEDRecordsSynthesizerDelegate.cpp",
		
        "./TimeRangeFetchers/ITimeRangeFetcher.cpp",
        "./TimeRangeFetchers/TimeRangeFetcher_SensorInput.cpp",
        "./TimeRangeFetchers/TimeRangeFetcher_ForensicLog.cpp",
        "./TimeRangeFetchers/TimeRangeFetcher_SohData.cpp",
        "./TimeRangeFetchers/TimeRangeFetcher_ClockStatus.cpp",
		
        "./DataFilters/MnemonicsDecoder.cpp",
        "./DataFilters/GraphBuilder.cpp",

        "./DataFilters/IAsyncFilter.cpp",
        "./DataFilters/IBaseFilter.cpp",
        "./DataFilters/IAsyncWorker.cpp",
        "./DataFilters/AsyncWorker_Functor.cpp",
        
        "./DataFilters/Data/ErrorDataDesc.cpp",
        "./DataFilters/Data/PDBDataDesc.cpp",
        "./DataFilters/Data/ProgressDataDesc.cpp",
        "./DataFilters/Data/PSFDataDesc.cpp",
        
        "./DataFilters/Generators/IPDBDataGenerator.cpp",
        "./DataFilters/Generators/PDBLogsGenerator.cpp",
        "./DataFilters/Generators/SensorInputGenerator.cpp",
        "./DataFilters/Generators/HealthInputGenerator.cpp",
        "./DataFilters/Generators/ClockStatusGenerator.cpp",
        "./DataFilters/Generators/samplers/ISamplesGenerator.cpp",
        "./DataFilters/Generators/samplers/SamplesGenerator_Accumulator.cpp",
        "./DataFilters/Generators/samplers/SamplesGenerator_Func.cpp",
        "./DataFilters/Generators/samplers/SamplesGenerator_MinMax.cpp",
        "./DataFilters/Generators/samplers/SamplesGenerator_RandomNormal.cpp",
        "./DataFilters/Generators/samplers/SamplesGenerator_RandomUniform.cpp",
        "./DataFilters/Generators/samplers/SamplesGenerator_Sine.cpp",
        "./DataFilters/Generators/gap_generators/IGapGenerator.cpp",
        "./DataFilters/Generators/gap_generators/GapGenerator_Random.cpp",
        "./DataFilters/Generators/gap_generators/GapGenerator_None.cpp",
        "./DataFilters/Progress/ProgressFilter.cpp",

        "./DataFilters/Readers/PSFReaderFilter.cpp",
        "./DataFilters/Readers/Predicates/IPSFReaderPredicate.cpp",
        "./DataFilters/Readers/Predicates/PSFReaderPredicate_Common.cpp",
        "./DataFilters/Readers/Predicates/PSFReaderPredicate_MaxPages.cpp",
        "./DataFilters/Readers/Predicates/PSFReaderPredicate_AND.cpp",
        "./DataFilters/Readers/Predicates/PSFReaderPredicate_TimeRange.cpp",
        "./DataFilters/Readers/Predicates/PSFReaderPredicate_Extender.cpp",
        "./DataFilters/Readers/Predicates/Timestamp_Dichotomizer.cpp",

        "./DataFilters/Writers/PacketInfoProvider_DigitizerStartBased.cpp",
        "./DataFilters/Writers/PacketSlicer_TimeRange.cpp",
        "./DataFilters/Writers/MiniSEEDWriterFilter_SensorInput.cpp",
        "./DataFilters/Writers/MiniSEEDWriterFilter_SohData.cpp",
        "./DataFilters/Writers/MiniSEEDWriterFilter_ClockStatus.cpp",
        "./DataFilters/Writers/MiniSEEDDirectoryState.cpp",
        "./DataFilters/Writers/MiniSEEDFileState.cpp",
        "./DataFilters/Writers/PSFWriterFilter.cpp",
        "./DataFilters/Writers/TxtLogWriterFilter.cpp",
        "./DataFilters/Writers/TxtLogDirectoryState.cpp",
        "./DataFilters/Writers/TxtLogFileState.cpp",
        "./DataFilters/Writers/IWriterFilter.cpp",
        
        "./DataFilters/Processors/ProcessorDelegateFilter.cpp",

        "./Operations/IOperation.cpp",
        "./Operations/Operation_Format.cpp",
        "./Operations/Operation_GetDigitizerInfo.cpp",
        "./Operations/Operation_GetVolumeInfo.cpp",
        "./Operations/Operation_EraseVolume.cpp",
        "./Operations/Operation_HarvestData.cpp",
        "./Operations/Operation_HarvestLogs.cpp",
        "./Operations/Operation_HarvestSOH.cpp",
        "./Operations/Operation_HarvestTimingSOH.cpp",
        "./Operations/Operation_ListDevices.cpp",
        "./Operations/Operation_FlushHarvestingHistory.cpp",
        "./Operations/Operation_ReadVolume.cpp",

        "./Utils/json_utils.cpp",
        "./Utils/JSONSerializer.cpp",     

        "./external/zlib-1.2.11/adler32.c",
        "./external/zlib-1.2.11/compress.c",
        "./external/zlib-1.2.11/crc32.c",
        "./external/zlib-1.2.11/deflate.c",
        "./external/zlib-1.2.11/gzclose.c",
        "./external/zlib-1.2.11/gzlib.c",
        "./external/zlib-1.2.11/gzread.c",
        "./external/zlib-1.2.11/gzwrite.c",
        "./external/zlib-1.2.11/infback.c",
        "./external/zlib-1.2.11/inffast.c",
        "./external/zlib-1.2.11/inflate.c",
        "./external/zlib-1.2.11/inftrees.c",
        "./external/zlib-1.2.11/trees.c",
	    "./external/zlib-1.2.11/uncompr.c",
        "./external/zlib-1.2.11/zutil.c"
      ],

      "msvs_settings": {
        "VCCLCompilerTool": {
          "ExceptionHandling": 1
        }
      },
      "xcode_settings": {
        "GCC_ENABLE_CPP_EXCEPTIONS" : "YES"
      },

      "conditions": [
        ['OS=="win"', {
          "defines": ['__WIN32']
        }],
        ['OS=="linux"', {
          "defines": ['__linux__'],
          "conditions": [
            ['target_arch=="silvermont"', {
                "cflags": ['-march=silvermont', '-mtune=silvermont', '-m64'],
                "ldflags": ['-m64']
              }
            ]
          ]
        }],
        ['OS=="mac"', {
          "defines": ['__APPLE__']
        }]         
      ],

      "cflags": ["-Wall", "-std=c++11"],
      'dependencies': [
        '../LibIO/binding.gyp:libLibIO',
        '../PSFLib/binding.gyp:libPSFLibrary',
        '../PDBLib/binding.gyp:libPDBLibrary',
        '../third-party/MiniSEED/binding.gyp:libMiniSEED'
      ],
      "include_dirs" : [
        "../LibIO",
        "../PSFLib",
        "../PDBLib",
        "../third-party/MiniSEED"
      ]
    }
  ] 
}
