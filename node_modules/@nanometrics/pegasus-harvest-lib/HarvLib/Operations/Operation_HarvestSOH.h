#ifndef Operation_HarvestSOH_h__
#define Operation_HarvestSOH_h__

#include "IOperation.h"

#include "../DataFilters/GraphBuilder.h"

/**
 * SOH data harvesting operation.
 */
class Operation_HarvestSOH : public IOperation
{
public:
  /**
   * Operation_HarvestSOH constructor
   * @param libPath           PSF library path
   * @param params            harvesting parameters
   * @param channelsMask      channelsMask to harvest
   * @param client            client information interface
   * @param progressDelegate  progress delegate
   */
  Operation_HarvestSOH(const std::string& libPath,
    const sHarvestParams& params,
    const uint32_t channelsMask,
    const std::shared_ptr<IClient>& client,
    const std::shared_ptr<IProgressDelegate>& progressDelegate);
  
  /**
   * Operation_HarvestSOH destructor
   */
  virtual ~Operation_HarvestSOH() = default;
  
private:
  virtual bool _executeImpl(const std::shared_ptr<IHasher>& hasher, 
      const std::shared_ptr<ILogger>& logger) __OVERRIDES__(IOperation);
  virtual bool _stopImpl() __OVERRIDES__(IOperation);

private:
  const std::string m_libPath;
  const sHarvestParams m_params;
  const uint32_t m_channelsMask;
  const std::shared_ptr<IClient> m_client;
  const std::shared_ptr<IProgressDelegate> m_progressDelegate;
  std::shared_ptr<IBaseFilter> m_headFilter;
};

#endif //Operation_HarvestSOH_h__
