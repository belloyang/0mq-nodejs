#ifndef Operation_GetDigitizerInfo_h__
#define Operation_GetDigitizerInfo_h__

#include "IOperation.h"

#include <DataTypes/DigitizerOperationLog/MsgDigitizerStart.h>

/**
 * Digitizer info operation. Provides the way to get an information about digitizer.
 */
class Operation_GetDigitizerInfo : public IOperation
{
public:
  class IDelegate
  {
  public:
    virtual ~IDelegate() {}
    virtual void onPSFInfoLoaded(IOperation* pOperation, const sPSFLibraryHeader_t& header, const std::vector<sVolumeInfo>& volumes) = 0;
    virtual void onInfoLoaded(IOperation* pOperation, const MsgDigitizerStart* pStart) = 0;
    virtual void onCompleted(IOperation* pOperation, const eOperationStatus status) = 0;
  };
  /**
   * Operation_GetDigitizerInfo constructor
   * @param libPath     library path that info will be retrieved from
   * @param delegate    delegate to handle operation process
   */
  Operation_GetDigitizerInfo(const std::string& libPath, const std::shared_ptr<IDelegate>& delegate);
  
  /**
   * Operation_GetDigitizerInfo destructor
   */
  virtual ~Operation_GetDigitizerInfo() = default;
  
private:
  virtual bool _executeImpl(const std::shared_ptr<IHasher>& hasher, 
      const std::shared_ptr<ILogger>& logger) __OVERRIDES__(IOperation);
  virtual bool _stopImpl() __OVERRIDES__(IOperation);
  
private:
  const std::string m_libPath;
  const std::shared_ptr<IDelegate> m_delegate;
};

#endif //Operation_GetDigitizerInfo_h__
