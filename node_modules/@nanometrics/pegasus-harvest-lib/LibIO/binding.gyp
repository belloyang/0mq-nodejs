{
  "targets": [
    {
      "target_name": "libLibIO",
      "cflags!": ["-fno-exceptions", "-Wno-unused-parameter"],
      "cflags_cc!": ["-fno-exceptions", "-Wno-unused-parameter"],
      "cflags": ["-Wall", "-Wextra", "-Wpedantic"],
      "cflags_cc": ["-Wall", "-Wextra", "-Wpedantic"],
      "type": "static_library",
      "sources": [
        "./Logger/ChainedLogger.cpp",
        "./Logger/ConsoleLogger.cpp",
        "./Meters/SpeedMeter.cpp",
        "./Meters/Timers/TimerNs.cpp",
        "./Meters/TimeMeter.cpp",
        "./Hasher/IHasher.cpp",
        "./Hasher/CRCHasher.cpp",
        "./Hasher/CRCDriver/ICRCDriver.cpp",
        "./Hasher/CRCDriver/CRCDriver_Mpeg32_SW.cpp",
        "./Hasher/CRCDriver/CRCDriver_Zip_SW.cpp",
        "./Hasher/CRCDriver/CRCDriver_CRC16_CCITT.cpp",
        "./Hasher/Murmur3Hasher.cpp",
        "./Hasher/NullHasher.cpp",
        "./IOContext/SequentialIOContext.cpp",
        "./IOContext/DriverBasedIOContext.cpp",
        "./IOContext/MemoryBufferIOContext.cpp",
        "./IOContext/RingBufferIOContext.cpp",
        "./IOContext/BufferedIOContext.cpp",
        "./IOContext/PartialIOContext.cpp",
        "./IOContext/ReadAheadIOContext.cpp",
        "./PlatformUtils/PlatformUtils.cpp",
        "./Utils/fat32_utils.cpp",
        "./Utils/zip_utils.cpp"
        ],

        "msvs_settings": {
          "VCCLCompilerTool": {
            "ExceptionHandling": 1
          }
        },
        "xcode_settings": {
          "GCC_ENABLE_CPP_EXCEPTIONS" : "YES"
        },

        "conditions": [
          ['OS=="win"', {
            "sources": [
              "./IOContext/win32/FileIOContext_Windows.cpp",
              "./IOContext/win32/FileIOContext_WindowsAsync.cpp",
              "./PlatformUtils/win32/PlatformUtilsImpl_Win32.cpp"
            ],
            "defines": ['__WIN32']
          }],
          ['OS=="linux"', {
            "conditions": [
              ['target_arch=="silvermont"', {
                  "cflags": ['-march=silvermont', '-mtune=silvermont', '-m64'],
                  "ldflags": ['-m64']
                }
              ]
            ],
            "sources": [
              "./IOContext/posix/FileIOContext_POSIX.cpp",
              "./PlatformUtils/posix/PlatformUtilsImpl_POSIX.cpp"
            ],
            "defines": ['__linux__']
          }],
          ['OS=="mac"', {
            "sources": [
              "./IOContext/posix/FileIOContext_POSIX.cpp",
              "./PlatformUtils/posix/PlatformUtilsImpl_POSIX.cpp"
            ],
            "defines": ['__APPLE__']
          }]         
        ],

        "cflags": ["-Wall", "-std=c++11"]
    }
  ] 
}
