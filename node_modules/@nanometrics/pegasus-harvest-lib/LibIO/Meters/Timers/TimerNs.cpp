#include "TimerNs.h"
#include <chrono>

TimerNs::TimerNs()
: ITimer()
{
  __DEV_CALLSTACK_FUNC__;
}

timestamp_t TimerNs::now() const
{
  __DEV_CALLSTACK_FUNC__;
  const auto duration = std::chrono::system_clock::now().time_since_epoch();
  const timestamp_t nanoseconds = (timestamp_t)std::chrono::duration_cast<std::chrono::nanoseconds>(duration).count();
  return nanoseconds;
}

timediff_t TimerNs::getElapsed(const timestamp_t point) const
{
  __DEV_CALLSTACK_FUNC__;
  const timestamp_t nowTime = this->now();
  return static_cast<timediff_t>(nowTime - point);
}
